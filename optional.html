
<!DOCTYPE html>
<!--
 Generated by Apache Maven Doxia at 2013-08-31
 Rendered using Maven Reflow Skin 1.0.0 (http://andriusvelykis.github.com/reflow-maven-skin)
-->
<html  xml:lang="en" lang="en">

	<head>
		<meta charset="UTF-8" />
		<title>Motif - Optional<V></title>
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<meta name="description" content="" />
		<meta http-equiv="content-language" content="en" />

		<link href="http://netdna.bootstrapcdn.com/twitter-bootstrap/2.2.2/css/bootstrap.min.css" rel="stylesheet" />
		<link href="http://netdna.bootstrapcdn.com/twitter-bootstrap/2.2.2/css/bootstrap-responsive.min.css" rel="stylesheet" />
		<link href="./css/docs.css" rel="stylesheet" />
		<link href="./css/reflow-skin.css" rel="stylesheet" />
		
		<link href="http://yandex.st/highlightjs/7.3/styles/default.min.css" rel="stylesheet" />
		
		<link href="./css/lightbox.css" rel="stylesheet" />
		
		<link href="./css/site.css" rel="stylesheet" />
		<link href="./css/print.css" rel="stylesheet" media="print" />
		
		<!-- Le HTML5 shim, for IE6-8 support of HTML5 elements -->
		<!--[if lt IE 9]>
			<script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
		<![endif]-->

	</head>

	<body class="page-optional project-motif" data-spy="scroll" data-offset="60" data-target="#toc-scroll-target">

		<div class="navbar navbar-fixed-top">
			<div class="navbar-inner">
				<div class="container">
					<a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
						<span class="icon-bar"></span>
						<span class="icon-bar"></span>
						<span class="icon-bar"></span>
					</a>
					<a class="brand" href="./">Motif</a>
					<div class="nav-collapse">
						<ul class="nav pull-right">
							<li class="dropdown active">
								<a href="#" class="dropdown-toggle" data-toggle="dropdown">Documentation <b class="caret"></b></a>
								<ul class="dropdown-menu">
									<li><a href="documentation.html" title="Overview">Overview </a></li>
									<li><a href="getting-started.html" title="Getting Started">Getting Started </a></li>
									<li class="active"><a href="" title="The Optional type">The Optional type </a></li>
									<li><a href="libraries-compare.html" title="Motif compared to other libraries">Motif compared to other libraries </a></li>
									<li><a href="apidocs/index.html" title="Javadocs">Javadocs </a></li>
								</ul>
							</li>
							<li class="dropdown">
								<a href="#" class="dropdown-toggle" data-toggle="dropdown">Generated reports <b class="caret"></b></a>
								<ul class="dropdown-menu">
									<li class="dropdown-submenu">
										<a href="project-info.html" title="Project Information">Project Information </a>
										<ul class="dropdown-menu">
											<li><a href="dependency-info.html" title="Dependency Information">Dependency Information </a></li>
											<li><a href="dependencies.html" title="Dependencies">Dependencies </a></li>
											<li><a href="license.html" title="Project License">Project License </a></li>
											<li><a href="team-list.html" title="Project Team">Project Team </a></li>
											<li><a href="project-summary.html" title="Project Summary">Project Summary </a></li>
											<li><a href="issue-tracking.html" title="Issue Tracking">Issue Tracking </a></li>
											<li><a href="source-repository.html" title="Source Repository">Source Repository </a></li>
										</ul>
									</li>
									<li class="dropdown-submenu">
										<a href="project-reports.html" title="Project Reports">Project Reports </a>
										<ul class="dropdown-menu">
											<li><a href="apidocs/index.html" title="JavaDocs">JavaDocs </a></li>
											<li><a href="testapidocs/index.html" title="Test JavaDocs">Test JavaDocs </a></li>
											<li><a href="xref/index.html" title="Source Xref">Source Xref </a></li>
											<li><a href="xref-test/index.html" title="Test Source Xref">Test Source Xref </a></li>
											<li><a href="surefire-report.html" title="Surefire Report">Surefire Report </a></li>
											<li><a href="findbugs.html" title="FindBugs Report">FindBugs Report </a></li>
											<li><a href="dependency-updates-report.html" title="Dependency Updates Report">Dependency Updates Report </a></li>
											<li><a href="plugin-updates-report.html" title="Plugin Updates Report">Plugin Updates Report </a></li>
										</ul>
									</li>
								</ul>
							</li>
						</ul>
					</div><!--/.nav-collapse -->
				</div>
			</div>
		</div>
		
	<div class="container">
	
	<!-- Masthead
	================================================== -->
		<hr class="toc-separator" />
		<div id="toc-bar" class="navbar">
			<div class="navbar-inner">
				<div id="toc-scroll-target" class="container">
					<ul id="toc" class="nav">
						<li class="toplevel"><a href="#optionalv" title="Optional<V>">Optional<V></a></li>
						<li class="toplevel"><a href="#Basic_use" title="Basic use">Basic use</a></li>
						<li class="toplevel"><a href="#Iterating_an_Optional" title="Iterating an Optional">Iterating an Optional</a></li>
						<li class="dropdown">
							<a href="#More_operations_on_OptionalV" title="More operations on Optional<V>" class="dropdown-toggle" role="button" data-toggle="dropdown" data-target="#">More operations on Optional<V> <b class="caret"></b></a>
							<ul class="dropdown-menu" role="menu">
								<!-- Repeat the item, otherwise it is not clickable as the dropdown root -->
								<li><a href="#More_operations_on_OptionalV" title="More operations on Optional<V>">More operations on Optional<V></a></li>
								<li class="divider"></li>
								<li><a href="#Deciding_Some_or_None_based_on_predicate" title="Deciding Some or None based on predicate">Deciding Some or None based on predicate</a></li>
								<li><a href="#Map_the_optional_value" title="Map the optional value">Map the optional value</a></li>

							</ul>
						</li>
					</ul>
				</div>
			</div>
		</div>
	</header>

	<div class="main-body">
	<div class="row">
		<div class="span12">
			<div class="body-content">
<div class="page-header">
 <h1 id="optionalv">Optional&lt;V&gt;</h1>
</div> 
<p><a href="apidocs/no/motif/option/Optional.html"><tt>Optional</tt></a>, or variants of it, is a ubiquitous type typically present in functional or hybrid-functional languages. It is used for cases when it is valid for a procedure (function, method, etc) to terminate with no result. In Java, the idiomatic way to do this is to return the dreaded null-pointer, or <tt>return null</tt>. However, the possibility of a “no result”-result, or <tt>null</tt>, cannot be expressed by the type system, and is typically the source of numerous <tt>NullPointerExceptions</tt> where the caller of a method forgets to check if the returned value is, in fact, an instance before dereferencing it.</p> 
<p>The Optional type explicitly expresses that a value may be something, or may be nothing, at the type level.</p> 
<div class="section"> 
 <h2 id="Basic_use">Basic use</h2> 
 <p>An Optional can be constructed using the <a href="apidocs/no/motif/Singular.html#optional28V29"><tt>no.motif.Singular.optional(..)</tt></a> factory method. It should be statically imported and used like this:</p> 
 <div class="source"> 
  <pre>String string = //get string or null from somewhere
Optional&lt;String&gt; optString = optional(string);
</pre> 
 </div> 
 <p>Now, <tt>optString</tt> is either an instance of <tt>Some&lt;String&gt;</tt> or the singleton <tt>None</tt>. It can be queried using <a href="apidocs/no/motif/option/Optional.html#isSome2829"><tt>optString.isSome()</tt></a> to determine if the string is indeed present or not, and if it is, it can be obtained with <a href="apidocs/no/motif/option/Optional.html#get2829"><tt>optString.get()</tt></a>.</p> 
 <p>The procedure described above looks more like a glorified old-fashioned null check, and not that much of any added value. The <tt>!= null</tt> has been replaced with a call to <tt>isSome()</tt>, and using the value requires a tedious call to <tt>get()</tt>. If anything, we have managed to somewhat force to check for the presence of the value, which can be argued to be a slight improvement, but it isn’t in any way spectacular.</p> 
</div> 
<div class="section"> 
 <h2 id="Iterating_an_Optional">Iterating an Optional</h2> 
 <p>An Optional can be viewed as an <tt>Iterable</tt> which is either empty or has exactly one element (analogous to a list with either zero or one element). In fact, <tt>Optional</tt> implements the <tt>Iterable</tt> interface, which makes it applicable for use with a standard <tt>for</tt>-loop in Java. Now, it may seem strange to “iterate” one value, but what we are actually using the loop for is to say “if present, then assign and execute block”.</p> 
 <p>Using <tt>optString</tt> from the previous example, we can print the string if it exists:</p> 
 <div class="source"> 
  <pre>for (String s : optString) System.out.println(s);
</pre> 
 </div> 
 <p>We can even write it on one line, and it doesn’t look half-bad.</p> 
</div> 
<div class="section"> 
 <h2 id="More_operations_on_OptionalV">More operations on Optional&lt;V&gt;</h2> 
 <p>The Optional type supports the use of the various function interfaces in Motif to enable safe operations on the optional value.</p> 
 <div class="section"> 
  <h3 id="Deciding_Some_or_None_based_on_predicate">Deciding <tt>Some</tt> or <tt>None</tt> based on predicate</h3> 
  <p>By default, the <tt>optional(..)</tt> factory method treats <tt>null</tt> as nothing, and any instance as something. But it may be situations where you want to adapt how values are viewed. For instance, you may want to treat both null and empty strings as nothing. This can be achieved by using [<tt>optional(Predicate, V)</tt>](apidocs/no/motif/Singular.html#optional(no.motif.f.Predicate, V%29), where the predicate decides if the value should be treated as “present”.</p> 
  <p>In the Strings class there is a predicate for precisely this purpose: <a href="apidocs/no/motif/Strings.html#blank"><tt>blank</tt></a>. We can negate the predicate with <a href="apidocs/no/motif/Base.html#not"><tt>not(blank)</tt></a> and use it with <tt>optional</tt> like this:</p> 
  <div class="source"> 
   <pre>for(String s : optional(not(blank), &quot;&quot;)) throw new RuntimeException();
</pre> 
  </div> 
  <p>No exception will be thrown in the above code. If we did not include the predicate, <tt>String s</tt> would be assigned the empty string, and a <tt>RuntimeException</tt> would have been thrown.</p> 
 </div> 
 <div class="section"> 
  <h3 id="Map_the_optional_value">Map the optional value</h3> 
  <p><tt>Optional</tt> also supports mapping (or transforming) its value to something else. The mapping operation is safe; you can perfectly map a non-existing value. The key is that the [<tt>map(..)</tt>](apidocs/no/motif/option/Optional.html#map(no.motif.f.Fn)) method returns a new Optional of the result type of the mapping function (or <tt>None</tt> if the mapper function maps to <tt>null</tt> or any other undefined value as decided by an optional predicate). The mapping functions are implementations of the <a href="apidocs/no/motif/f/Fn.html"><tt>Fn&lt;I, O&gt;</tt></a> interface.</p> 
  <p>Say we have a string that may or may not be numeric and we are only interested in it if indeed it is numeric. We need a predicate to decide if a string is numeric:</p> 
  <div class="source"> 
   <pre>public final Predicate&lt;String&gt; numeric = new Predicate&lt;String&gt;() {
    public boolean $(String string) {
        return !StringUtils.isNumeric(string);
    }
};
</pre> 
  </div> 
  <p>We also need to parse the string as an <tt>int</tt> to be able to use it, so we define a transformer for that:</p> 
  <div class="source"> 
   <pre>public final Fn&lt;String, Integer&gt; toInt = new Fn&lt;String, Integer&gt;() {
    public Integer $(String string) {
        return Integer.parseInt(string);
    }
};
</pre> 
  </div> 
  <p>The two functions defined above can then be used with <tt>optional</tt> like this:</p> 
  <div class="source"> 
   <pre>String mayBeNumber = //get the number
for (int i : optional(numeric, mayBeNumber).map(toInt)) {
    // do something with i
}
</pre> 
  </div> 
  <p>If <tt>mayBeNumber</tt> is numeric, the string is converted to an integer and assigned to <tt>int i</tt>, and the block is executed. If mayBeNumber is not numeric, the <tt>None</tt> singleton instance is returned from both <tt>optional(..)</tt>, and <tt>map(..)</tt>, and following no assignment is done to <tt>i</tt>.</p> 
 </div> 
</div>
			</div>
		</div>
	</div>
	</div>

	</div><!-- /container -->
	
	<!-- Footer
	================================================== -->
	<footer class="well">
		<div class="container">
			<div class="row">
				<div class="span9 bottom-nav">
					<ul class="nav nav-list">
						<li class="nav-header">Main</li>
						<li>
							<a href="dependency-info.html" title="Getting Motif">Getting Motif </a>
						</li>
						<li>
							<a href="http://github.com/runeflobakk/motif" title="Motif on GitHub" class="externalLink">Motif on GitHub </a>
						</li>
						<li class="nav-header">Documentation</li>
						<li>
							<a href="documentation.html" title="Overview">Overview </a>
						</li>
						<li>
							<a href="getting-started.html" title="Getting Started">Getting Started </a>
						</li>
						<li class="active">
							<a href="#" title="The Optional type">The Optional type </a>
						</li>
						<li>
							<a href="libraries-compare.html" title="Motif compared to other libraries">Motif compared to other libraries </a>
						</li>
						<li>
							<a href="apidocs/index.html" title="Javadocs">Javadocs </a>
						</li>
						<li class="nav-header">Generated reports</li>
						<li>
							<a href="project-info.html" title="Project Information">Project Information <i class="icon-chevron-right"></i></a>
						</li>
						<li>
							<a href="project-reports.html" title="Project Reports">Project Reports <i class="icon-chevron-right"></i></a>
						</li>
					</ul>
				</div>
			</div>
		</div>
	</footer>
		
	<div class="container subfooter">
		<div class="row">
			<div class="span12">
				<p class="pull-right"><a href="#">Back to top</a></p>
				<p class="copyright">Copyright &copy;2013. All Rights Reserved.</p>
				<p class="version-date"><span class="projectVersion">Version: 0.2. </span><span class="publishDate">Last Published: 2013-08-31. </span></p>
				<p><a href="http://github.com/andriusvelykis/reflow-maven-skin" title="Reflow Maven skin">Reflow Maven skin</a> by <a href="http://andrius.velykis.lt" target="_blank" title="Andrius Velykis">Andrius Velykis</a>.</p>
			</div>
		</div>
	</div>

	<!-- Le javascript
	================================================== -->
	<!-- Placed at the end of the document so the pages load faster -->

	<!-- Fallback jQuery loading from Google CDN:
	     http://stackoverflow.com/questions/1014203/best-way-to-use-googles-hosted-jquery-but-fall-back-to-my-hosted-library-on-go -->
	<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
	<script type="text/javascript">
		if (typeof jQuery == 'undefined')
		{
			document.write(unescape("%3Cscript src='./js/jquery-1.8.3.min.js' type='text/javascript'%3E%3C/script%3E"));
		}
	</script>
	
	<script src="http://netdna.bootstrapcdn.com/twitter-bootstrap/2.2.2/js/bootstrap.min.js"></script>
	<script src="./js/lightbox.js"></script>
	<script src="./js/jquery.smooth-scroll.min.js"></script>
	<!-- back button support for smooth scroll -->
	<script src="./js/jquery.ba-bbq.min.js"></script>
	<script src="http://yandex.st/highlightjs/7.3/highlight.min.js"></script>

	<script src="./js/reflow-skin.js"></script>
	
	</body>
</html>