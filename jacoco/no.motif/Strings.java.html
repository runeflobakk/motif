<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../.resources/report.css" type="text/css"/><link rel="shortcut icon" href="../.resources/report.gif" type="image/gif"/><title>Strings.java</title><link rel="stylesheet" href="../.resources/prettify.css" type="text/css"/><script type="text/javascript" src="../.resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="right"><a href="../.sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">Motif</a> &gt; <a href="index.html" class="el_package">no.motif</a> &gt; <span class="el_source">Strings.java</span></div><h1>Strings.java</h1><pre class="source lang-java linenums">package no.motif;

import static no.motif.Base.all;
import static no.motif.Base.both;
import static no.motif.Base.equalTo;
import static no.motif.Base.exists;
import static no.motif.Base.not;
import static no.motif.Base.where;
import static no.motif.Chars.digit;
import static no.motif.Chars.letter;
import static no.motif.Chars.letterOrDigit;
import static no.motif.Chars.whitespace;
import static no.motif.f.Apply.argsReversed;
import no.motif.f.Apply;
import no.motif.f.Fn;
import no.motif.f.Fn2;
import no.motif.f.Predicate;
import no.motif.f.Predicate.Always;
import no.motif.f.base.FalseIfNullOrElse;
import no.motif.f.base.PassThruIfNullOrElse;

/**
 * Functions operating on {@link String strings}.
 */
public final class Strings {

    /**
     * Converts a string to a &lt;code&gt;int&lt;/code&gt; value using {@link Integer#valueOf(String)}.
     * If the string is &lt;code&gt;null&lt;/code&gt;, 0 is yielded.
     */
<span class="fc" id="L31">    public static final Fn&lt;String, Integer&gt; toInt = new Fn&lt;String, Integer&gt;() {</span>
<span class="fc bfc" id="L32" title="All 2 branches covered.">        @Override public Integer $(String numeric) { return numeric != null ? Integer.valueOf(numeric) : 0; }};</span>


    /**
     * Converts a string to a &lt;code&gt;double&lt;/code&gt; value using {@link Double#valueOf(String)}.
     * If the string is &lt;code&gt;null&lt;/code&gt;, 0 is yielded.
     */
<span class="fc" id="L39">    public static final Fn&lt;String, Double&gt; toDouble = new Fn&lt;String, Double&gt;() {</span>
<span class="fc bfc" id="L40" title="All 2 branches covered.">        @Override public Double $(String decimalValue) { return decimalValue != null ? Double.valueOf(decimalValue) : 0; }};</span>


    /**
     * Splits a string into characters.
     */
<span class="fc" id="L46">    public static final Fn&lt;String, Iterable&lt;Character&gt;&gt; toChars = new Fn&lt;String, Iterable&lt;Character&gt;&gt;() {</span>
<span class="fc" id="L47">        @Override public Iterable&lt;Character&gt; $(String value) { return Iterate.on(value); }};</span>


    /**
     * A blank string is either &lt;code&gt;null&lt;/code&gt;, empty, or
     * all characters {@link Chars#whitespace are whitespace}.
     */
<span class="fc" id="L54">    public static final Predicate&lt;String&gt; blank = where(toChars, all(whitespace));</span>


    /**
     * A nonblank string has at least one character, and must contain at least
     * one character which is {@link Chars#whitespace not whitespace}.
     */
<span class="fc" id="L61">    public static final Predicate&lt;String&gt; nonblank = where(toChars, exists(not(whitespace)));</span>


    /**
     * A numeric string must have at least one character, and all of them
     * must be {@link Chars#digit digits}.
     */
<span class="fc" id="L68">    public static final Predicate&lt;String&gt; numeric = nonblankAllChars(digit);</span>


    /**
     * Alphanumeric strings are at least one character, and all
     * {@link Chars#digit digits} and/or {@link Chars#letter letters}.
     */
<span class="fc" id="L75">    public static final Predicate&lt;String&gt; alphanumeric = nonblankAllChars(letterOrDigit);</span>


    /**
     * Alphabetic strings are at least one character, and all {@link Chars#letter letters}.
     */
<span class="fc" id="L81">    public static final Predicate&lt;String&gt; alphabetic = nonblankAllChars(letter);</span>


    /**
     * Predicate verifying that all characters in a string satifies a given predicate.
     *
     * @param valid The predicate evaluating all characters in a string.
     */
    public static final Predicate&lt;String&gt; allChars(Predicate&lt;Character&gt; valid) {
<span class="fc" id="L90">        return where(toChars, all(valid)); }</span>

    /**
     * Predicate verifying that strings are {@link #nonblank not blank} and
     * each char satisfies a given predicate.
     *
     * @param valid
     */
    public static final Predicate&lt;String&gt; nonblankAllChars(Predicate&lt;Character&gt; valid) {
<span class="fc" id="L99">        return both(nonblank).and(allChars(valid)); }</span>


    /**
     * Trims a string, removing all leading and trailing whitespace.
     */
<span class="fc" id="L105">    public static final Fn&lt;String, String&gt; trimmed = new PassThruIfNullOrElse&lt;String, String&gt;() {</span>
<span class="fc" id="L106">        @Override protected String $nullsafe(String s) { return s.trim(); }};</span>


    /**
     * Convert a string to {@link String#toLowerCase() lower case}.
     */
<span class="fc" id="L112">    public static final Fn&lt;String, String&gt; lowerCased = new PassThruIfNullOrElse&lt;String, String&gt;() {</span>
<span class="fc" id="L113">        @Override protected String $nullsafe(String s) { return s.toLowerCase(); }};</span>


    /**
     * Convert a string to {@link String#toUpperCase() upper case}
     */
<span class="fc" id="L119">    public static final Fn&lt;String, String&gt; upperCased = new PassThruIfNullOrElse&lt;String, String&gt;() {</span>
<span class="fc" id="L120">        @Override protected String $nullsafe(String s) { return s.toUpperCase(); }};</span>


    /**
     * Gives the length of a string, i.e. the amount of characters. &lt;code&gt;null&lt;/code&gt;
     * yields length 0.
     */
<span class="fc" id="L127">    public static final Fn&lt;String, Integer&gt; length = new Fn&lt;String, Integer&gt;() {</span>
<span class="fc bfc" id="L128" title="All 2 branches covered.">        @Override public Integer $(String s) { return s != null ? s.length() : 0; }};</span>


    /**
     * Evaluate if strings are of a exact length.
     * &lt;code&gt;null&lt;code&gt;s are considered to have length zero.
     */
<span class="fc" id="L135">    public static final Predicate&lt;String&gt; hasLength(int exactLength) { return hasLength(equalTo(exactLength)); }</span>


    /**
     * Evaluate if strings have accepted lengths.
     * &lt;code&gt;null&lt;code&gt;s are considered to have length zero.
     *
     * @param accepted The predicate evaluating accepted length.
     * @return The predicate evaluating string length.
     */
<span class="fc" id="L145">    public static final Predicate&lt;String&gt; hasLength(Predicate&lt;? super Integer&gt; accepted) { return where(length, accepted); }</span>


    /**
     * Concatenate a string with the {@link Object#toString() string representation}
     * of an arbitrary object, i.e. &lt;em&gt;reduces&lt;/em&gt; two strings to one.
     */
<span class="fc" id="L152">    public static final Fn2&lt;Object, Object, String&gt; concat = new Fn2&lt;Object, Object, String&gt;() {</span>
<span class="fc bfc" id="L153" title="All 2 branches covered.">        String emptyIfNull(Object o) { return (o != null? String.valueOf(o) : &quot;&quot;); }</span>
<span class="fc" id="L154">        @Override public String $(Object acc, Object c) { return emptyIfNull(acc) + emptyIfNull(c); }};</span>


    /**
     * Determines if a substring is present in a string. A string never contains &lt;code&gt;null&lt;/code&gt;,
     * nor does &lt;code&gt;null&lt;/code&gt; contain any substring.
     *
     * @param charSequence The substring to find.
     * @return The predicate.
     */
    public static Predicate&lt;String&gt; contains(final CharSequence charSequence) {
<span class="fc bfc" id="L165" title="All 2 branches covered.">        return charSequence == null ? Always.&lt;String&gt;no() : new FalseIfNullOrElse&lt;String&gt;() {</span>
<span class="fc" id="L166">        @Override protected boolean $nullsafe(String string) { return string.contains(charSequence); }}; }</span>


    /**
     * Determines if a string starts with a given prefix string.
     *
     * @param prefix The prefix.
     * @return The predicate.
     */
    public static Predicate&lt;String&gt; startsWith(final String prefix) {
<span class="fc bfc" id="L176" title="All 2 branches covered.">        return prefix == null ? Always.&lt;String&gt;no() : new FalseIfNullOrElse&lt;String&gt;() {</span>
<span class="fc" id="L177">        @Override protected boolean $nullsafe(String string) { return string.startsWith(prefix); }}; }</span>


    /**
     * Determines if a string ends with a given suffix string.
     *
     * @param suffix The suffix.
     * @return The predicate.
     */
    public static Predicate&lt;String&gt; endsWith(final String suffix) {
<span class="fc bfc" id="L187" title="All 2 branches covered.">        return suffix == null ? Always.&lt;String&gt;no() : new FalseIfNullOrElse&lt;String&gt;() {</span>
<span class="fc" id="L188">        @Override protected boolean $nullsafe(String string) { return string.endsWith(suffix); }}; }</span>


    /**
     * Does a {@link String#matches(String) regular expression match} on strings.
     *
     * @param regex The regular expression to use for matching.
     * @return the predicate.
     */
    public static Predicate&lt;String&gt; matches(final String regex) {
<span class="fc bfc" id="L198" title="All 2 branches covered.">        return regex == null ? Always.&lt;String&gt;no() : new FalseIfNullOrElse&lt;String&gt;() {</span>
<span class="fc" id="L199">        @Override protected boolean $nullsafe(String string) { return string.matches(regex); }};}</span>


    /**
     * Create a new strings by prepending a prefix.
     * @param prefix the prefix to prepend
     */
<span class="fc" id="L206">    public static Fn&lt;Object, String&gt; prepend(String prefix) { return Apply.partially(concat).of(prefix); }</span>


    /**
     * Create a new strings by appending a suffix.
     * @param suffix the suffix to append
     */
<span class="fc" id="L213">    public static Fn&lt;Object, String&gt; append(String suffix) { return Apply.partially(argsReversed(concat)).of(suffix); }</span>


    /**
     * Extract substring from strings. As
     * this function simply delegates to {@link String#substring(int, int)}, it
     * may throw an {@link IndexOutOfBoundsException} if the given indexes
     * are invalid.
     *
     * @param beginIndex The index of the first character to include.
     * @param endIndex The index to end the extraction.
     */
    public static Fn&lt;String, String&gt; substring(final int beginIndex, final int endIndex) {
<span class="fc" id="L226">        return new Fn&lt;String, String&gt;() { @Override public String $(String s) { return s.substring(beginIndex, endIndex); }}; }</span>


    /**
     * Get at most a given amount of the first characters of strings.
     * If the string is shorter than the amount, the original string is returned.
     */
    public static Fn&lt;String, String&gt; first(final int charAmount) {
<span class="fc" id="L234">        return new Fn&lt;String, String&gt;() {</span>
            @Override public String $(String s) {
<span class="fc bfc" id="L236" title="All 2 branches covered.">                if (s == null) return &quot;&quot;;</span>
<span class="fc bfc" id="L237" title="All 2 branches covered.">                return (charAmount &gt; s.length()) ? s : s.substring(0, charAmount);</span>
            }};
    }


    /**
     * Get at most a given amount of the last characters of strings.
     * If the string is shorter than the amount, the original string is returned.
     */
    public static Fn&lt;String, String&gt; last(final int charAmount) {
<span class="fc" id="L247">        return new Fn&lt;String, String&gt;() {</span>
            @Override public String $(String s) {
<span class="fc bfc" id="L249" title="All 2 branches covered.">                if (s == null) return &quot;&quot;;</span>
<span class="fc bfc" id="L250" title="All 2 branches covered.">                return (charAmount &gt; s.length()) ? s : s.substring(s.length() - charAmount, s.length());</span>
            }};
    }




<span class="fc" id="L257">    private Strings() {}</span>

}
</pre><div class="footer"><span class="right">Created with <a href="http://www.eclemma.org/jacoco">JaCoCo</a> 0.6.3.201306030806</span></div></body></html>